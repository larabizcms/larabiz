const __vite__fileDeps=["assets/ElementBuilder-CAjw93Z3.js","assets/index-C-recmsz.js","assets/Checkbox-BtUHbdNU.js","assets/MediaDialog-5rtpPXTT.js","assets/DialogTitle-CZNhHO00.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as e,G as i,A as w,B as j,e as A,y as f,t as b,M as _,u as B,b as D,c as v,T as L,f as k,z as O,m as E,R as o,_ as P,C as R,F as V,H as G,U as S,J as I,K as N,N as F,O as Q,P as U,r as z,Q as W,V as $}from"./index-C-recmsz.js";import{E as H,B as M}from"./ElementBuilder-CAjw93Z3.js";import{m as q}from"./makeStyles-Bafc_MSd.js";import{D as J,a as K,b as X,c as Y}from"./DialogTitle-CZNhHO00.js";import"./Checkbox-BtUHbdNU.js";function Z({page:t,uri:s}){return e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,sx:{display:"flex",justifyContent:"right"},children:e.jsx(w,{children:e.jsx(j,{disableElevation:!0,fullWidth:!0,type:"button",variant:"contained",color:"success",component:A,startIcon:e.jsx(f,{children:"add"}),to:"/admin-cp/"+s+"/create",children:b("Add New")})})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(_,{children:e.jsx(H,{children:t.data.children})})})]})}const ee=q({topScrollPaper:{alignItems:"flex-start"},topPaperScrollBody:{verticalAlign:"top"}}),te=t=>{const s=ee(),{refetchMedia:a,setOpen:n}=t,{loading:c}=B(h=>h.media),l=D(),{setError:d,handleSubmit:g,setValue:u}=l,p=v(),r=()=>{n(!1)},m=h=>{h.parent_id=t.parentId,p(O(h)).then(x=>{E(x,d),n(!1),u("name",""),a()}).catch(x=>{E(x,d)})};return e.jsx(J,{open:t.open,onClose:r,"aria-labelledby":"form-dialog-title",scroll:"paper",maxWidth:"md",classes:{scrollPaper:s.topScrollPaper,paperScrollBody:s.topPaperScrollBody},sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"350px",marginTop:"100px"}}},children:e.jsxs("form",{noValidate:!0,onSubmit:g(m),children:[e.jsx(K,{sx:{textAlign:"center",fontWeight:"bold"},children:"Make Folder"}),e.jsx(X,{children:e.jsx(L,{label:"Folder Name",name:"name",form:l,config:{rules:["required"]}})}),e.jsx(Y,{children:e.jsxs(M,{children:[e.jsx(k,{loading:c,type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(f,{children:"add"}),children:b("Add Folder")}),e.jsx(j,{variant:"contained",onClick:r,color:"secondary",children:"Close"})]})})]})})},se=o.lazy(()=>P(()=>import("./ElementBuilder-CAjw93Z3.js").then(t=>t.e),__vite__mapDeps([0,1,2]))),ae=R(o.lazy(()=>P(()=>import("./MediaDialog-5rtpPXTT.js"),__vite__mapDeps([3,1,4]))));function re({page:t,folder:s}){var x,C;const[a,n]=o.useState(!1),[c,l]=o.useState(!1),[d,g]=o.useState({page:1,limit:30,parent_id:s}),[u,p]=o.useState(),{data:r,refetch:m}=V(d);o.useEffect(()=>{m()},[s,d]);const h=y=>{p(y[0])};return e.jsxs(o.Fragment,{children:[e.jsx(G,{in:a,children:e.jsx(_,{children:e.jsx(S,{folder:s,refetchMedia:m})})}),e.jsx(I,{sx:{mt:3},children:e.jsx(i,{container:!0,justifyContent:"flex-end",children:e.jsxs(M,{children:[r&&((x=r==null?void 0:r.data)==null?void 0:x.length)>0&&e.jsx(j,{type:"button",variant:"contained",color:"success",startIcon:e.jsx(f,{children:"cloud_upload"}),onClick:()=>n(!a),children:"Upload"}),e.jsx(j,{type:"button",variant:"contained",color:"primary",startIcon:e.jsx(f,{children:"add"}),onClick:()=>l(!c),children:b("New Folder")})]})})}),e.jsx(_,{sx:{mt:3},children:e.jsx(I,{children:r&&((C=r==null?void 0:r.data)==null?void 0:C.length)>0?e.jsx(i,{container:!0,spacing:2,children:r.data.map((y,T)=>e.jsx(i,{item:!0,xs:6,sm:3,md:2,children:e.jsx(N,{item:y,showAction:!0,goToFolder:!0,onChoose:h})},T))}):e.jsx(i,{container:!0,spacing:2,children:e.jsx(i,{item:!0,xs:12,justifyContent:"center",children:e.jsx(S,{folder:s,refetchMedia:m})})})})}),e.jsx(se,{children:t.data.children||[]}),e.jsx(te,{open:c,setOpen:l,parentId:s,refetchMedia:m}),e.jsx(ae,{selectedItem:u,setSelectedItem:p})]})}const ne=(t,s)=>{var a,n;switch(t.data.template){case"media":return e.jsx(re,{page:t,...(a=t==null?void 0:t.data)==null?void 0:a.params});case"crud-index":return e.jsx(Z,{page:t,uri:s,...(n=t==null?void 0:t.data)==null?void 0:n.params})}return e.jsx(F,{})},oe=(t,s)=>{switch(t.data.template){default:return ne(t,s)}},ie=oe,ce=o.lazy(()=>P(()=>import("./ElementBuilder-CAjw93Z3.js").then(t=>t.e),__vite__mapDeps([0,1,2])));function xe(){var u;const s=Q()["*"]||"",{data:a,error:n,refetch:c,isLoading:l,isFetching:d}=U(s);return z.useEffect(()=>{c()},[s,c]),(!a||(l||d))&&!n?e.jsx(W,{}):n?e.jsx(F,{}):a.success?e.jsx($,{title:a.data.title,description:a.data.description,breadcrumbs:a.data.breadcrumbs,showTitle:a.data.show_title,children:(u=a.data)!=null&&u.template?ie(a,s):e.jsx(ce,{children:a.data.children||[]})}):e.jsx(F,{})}export{xe as default};
