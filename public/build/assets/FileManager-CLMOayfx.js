import{J as ve,K as me,M as Y,aI as Oe,N as He,p as v,r as u,V as xe,X as ae,Y as H,j as n,Z as Se,aX as st,b7 as De,b8 as Xe,bb as Ue,b9 as se,bh as at,an as be,b6 as it,$ as ct,R as z,a4 as dt,C as he,t as fe,a6 as We,b0 as ut,B as bt,G as ze,T as ft}from"./index-C7XDJ_kP.js";import{U as pt,I as ht,M as vt}from"./InfiniteScroll-DjqvMlpW.js";import{a as mt,K as xt}from"./KeyboardArrowRight-xWWYqYCj.js";let G;function _e(){if(G)return G;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),G="reverse",e.scrollLeft>0?G="default":(e.scrollLeft=1,e.scrollLeft===0&&(G="negative")),document.body.removeChild(e),G}function St(e,t){const l=e.scrollLeft;if(t!=="rtl")return l;switch(_e()){case"negative":return e.scrollWidth-e.clientWidth+l;case"reverse":return e.scrollWidth-e.clientWidth-l;default:return l}}function gt(e){return me("MuiTab",e)}const O=ve("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),yt=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Ct=e=>{const{classes:t,textColor:l,fullWidth:s,wrapped:a,icon:i,label:m,selected:f,disabled:p}=e,x={root:["root",i&&m&&"labelIcon",`textColor${He(l)}`,s&&"fullWidth",a&&"wrapped",f&&"selected",p&&"disabled"],iconWrapper:["iconWrapper"]};return Se(x,gt,t)},Bt=Y(Oe,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:l}=e;return[t.root,l.label&&l.icon&&t.labelIcon,t[`textColor${He(l.textColor)}`],l.fullWidth&&t.fullWidth,l.wrapped&&t.wrapped,{[`& .${O.iconWrapper}`]:t.iconWrapper}]}})(({theme:e,ownerState:t})=>v({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${O.iconWrapper}`]:v({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${O.selected}`]:{opacity:1},[`&.${O.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${O.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${O.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${O.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${O.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),Le=u.forwardRef(function(t,l){const s=xe({props:t,name:"MuiTab"}),{className:a,disabled:i=!1,disableFocusRipple:m=!1,fullWidth:f,icon:p,iconPosition:x="top",indicator:w,label:y,onChange:b,onClick:I,onFocus:T,selected:C,selectionFollowsFocus:g,textColor:L="inherit",value:M,wrapped:q=!1}=s,F=ae(s,yt),D=v({},s,{disabled:i,disableFocusRipple:m,selected:C,icon:!!p,iconPosition:x,label:!!y,fullWidth:f,textColor:L,wrapped:q}),k=Ct(D),P=p&&y&&u.isValidElement(p)?u.cloneElement(p,{className:H(k.iconWrapper,p.props.className)}):p,K=h=>{!C&&b&&b(h,M),I&&I(h)},N=h=>{g&&!C&&b&&b(h,M),T&&T(h)};return n.jsxs(Bt,v({focusRipple:!m,className:H(k.root,a),ref:l,role:"tab","aria-selected":C,disabled:i,onClick:K,onFocus:N,ownerState:D,tabIndex:C?0:-1},F,{children:[x==="top"||x==="start"?n.jsxs(u.Fragment,{children:[P,y]}):n.jsxs(u.Fragment,{children:[y,P]}),w]}))});function wt(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function It(e,t,l,s={},a=()=>{}){const{ease:i=wt,duration:m=300}=s;let f=null;const p=t[e];let x=!1;const w=()=>{x=!0},y=b=>{if(x){a(new Error("Animation cancelled"));return}f===null&&(f=b);const I=Math.min(1,(b-f)/m);if(t[e]=i(I)*(l-p)+p,I>=1){requestAnimationFrame(()=>{a(null)});return}requestAnimationFrame(y)};return p===l?(a(new Error("Element already at target position")),w):(requestAnimationFrame(y),w)}const Tt=["onChange"],Mt={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Et(e){const{onChange:t}=e,l=ae(e,Tt),s=u.useRef(),a=u.useRef(null),i=()=>{s.current=a.current.offsetHeight-a.current.clientHeight};return st(()=>{const m=Xe(()=>{const p=s.current;i(),p!==s.current&&t(s.current)}),f=De(a.current);return f.addEventListener("resize",m),()=>{m.clear(),f.removeEventListener("resize",m)}},[t]),u.useEffect(()=>{i(),t(s.current)},[t]),n.jsx("div",v({style:Mt,ref:a},l))}function jt(e){return me("MuiTabScrollButton",e)}const Rt=ve("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Pt=["className","slots","slotProps","direction","orientation","disabled"],Wt=e=>{const{classes:t,orientation:l,disabled:s}=e;return Se({root:["root",l,s&&"disabled"]},jt,t)},zt=Y(Oe,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:l}=e;return[t.root,l.orientation&&t[l.orientation]]}})(({ownerState:e})=>v({width:40,flexShrink:0,opacity:.8,[`&.${Rt.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Lt=u.forwardRef(function(t,l){var s,a;const i=xe({props:t,name:"MuiTabScrollButton"}),{className:m,slots:f={},slotProps:p={},direction:x}=i,w=ae(i,Pt),y=Ue(),b=v({isRtl:y},i),I=Wt(b),T=(s=f.StartScrollButtonIcon)!=null?s:mt,C=(a=f.EndScrollButtonIcon)!=null?a:xt,g=se({elementType:T,externalSlotProps:p.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b}),L=se({elementType:C,externalSlotProps:p.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b});return n.jsx(zt,v({component:"div",className:H(I.root,m),ref:l,role:null,ownerState:b,tabIndex:null},w,{children:x==="left"?n.jsx(T,v({},g)):n.jsx(C,v({},L))}))});function Ft(e){return me("MuiTabs",e)}const pe=ve("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),kt=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Fe=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,ke=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ne=(e,t,l)=>{let s=!1,a=l(e,t);for(;a;){if(a===e.firstChild){if(s)return;s=!0}const i=a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||i)a=l(e,a);else{a.focus();return}}},Nt=e=>{const{vertical:t,fixed:l,hideScrollbar:s,scrollableX:a,scrollableY:i,centered:m,scrollButtonsHideMobile:f,classes:p}=e;return Se({root:["root",t&&"vertical"],scroller:["scroller",l&&"fixed",s&&"hideScrollbar",a&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",m&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",f&&"scrollButtonsHideMobile"],scrollableX:[a&&"scrollableX"],hideScrollbar:[s&&"hideScrollbar"]},Ft,p)},$t=Y("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:l}=e;return[{[`& .${pe.scrollButtons}`]:t.scrollButtons},{[`& .${pe.scrollButtons}`]:l.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,l.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>v({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${pe.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),At=Y("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:l}=e;return[t.scroller,l.fixed&&t.fixed,l.hideScrollbar&&t.hideScrollbar,l.scrollableX&&t.scrollableX,l.scrollableY&&t.scrollableY]}})(({ownerState:e})=>v({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),Ot=Y("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:l}=e;return[t.flexContainer,l.vertical&&t.flexContainerVertical,l.centered&&t.centered]}})(({ownerState:e})=>v({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),Ht=Y("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>v({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),Dt=Y(Et)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Ne={},Xt=u.forwardRef(function(t,l){const s=xe({props:t,name:"MuiTabs"}),a=at(),i=Ue(),{"aria-label":m,"aria-labelledby":f,action:p,centered:x=!1,children:w,className:y,component:b="div",allowScrollButtonsMobile:I=!1,indicatorColor:T="primary",onChange:C,orientation:g="horizontal",ScrollButtonComponent:L=Lt,scrollButtons:M="auto",selectionFollowsFocus:q,slots:F={},slotProps:D={},TabIndicatorProps:k={},TabScrollButtonProps:P={},textColor:K="primary",value:N,variant:h="standard",visibleScrollbar:X=!1}=s,Ve=ae(s,kt),j=h==="scrollable",E=g==="vertical",Q=E?"scrollTop":"scrollLeft",te=E?"top":"left",oe=E?"bottom":"right",ie=E?"clientHeight":"clientWidth",J=E?"height":"width",U=v({},s,{component:b,allowScrollButtonsMobile:I,indicatorColor:T,orientation:g,vertical:E,scrollButtons:M,textColor:K,variant:h,visibleScrollbar:X,fixed:!j,hideScrollbar:j&&!X,scrollableX:j&&!E,scrollableY:j&&E,centered:x&&!j,scrollButtonsHideMobile:!I}),$=Nt(U),Ye=se({elementType:F.StartScrollButtonIcon,externalSlotProps:D.startScrollButtonIcon,ownerState:U}),Ke=se({elementType:F.EndScrollButtonIcon,externalSlotProps:D.endScrollButtonIcon,ownerState:U}),[ge,Ge]=u.useState(!1),[_,ye]=u.useState(Ne),[Ce,qe]=u.useState(!1),[Be,Qe]=u.useState(!1),[we,Je]=u.useState(!1),[Ie,Ze]=u.useState({overflow:"hidden",scrollbarWidth:0}),Te=new Map,W=u.useRef(null),V=u.useRef(null),Me=()=>{const o=W.current;let r;if(o){const c=o.getBoundingClientRect();r={clientWidth:o.clientWidth,scrollLeft:o.scrollLeft,scrollTop:o.scrollTop,scrollLeftNormalized:St(o,i?"rtl":"ltr"),scrollWidth:o.scrollWidth,top:c.top,bottom:c.bottom,left:c.left,right:c.right}}let d;if(o&&N!==!1){const c=V.current.children;if(c.length>0){const S=c[Te.get(N)];d=S?S.getBoundingClientRect():null}}return{tabsMeta:r,tabMeta:d}},Z=be(()=>{const{tabsMeta:o,tabMeta:r}=Me();let d=0,c;if(E)c="top",r&&o&&(d=r.top-o.top+o.scrollTop);else if(c=i?"right":"left",r&&o){const B=i?o.scrollLeftNormalized+o.clientWidth-o.scrollWidth:o.scrollLeft;d=(i?-1:1)*(r[c]-o[c]+B)}const S={[c]:d,[J]:r?r[J]:0};if(isNaN(_[c])||isNaN(_[J]))ye(S);else{const B=Math.abs(_[c]-S[c]),R=Math.abs(_[J]-S[J]);(B>=1||R>=1)&&ye(S)}}),ce=(o,{animation:r=!0}={})=>{r?It(Q,W.current,o,{duration:a.transitions.duration.standard}):W.current[Q]=o},Ee=o=>{let r=W.current[Q];E?r+=o:(r+=o*(i?-1:1),r*=i&&_e()==="reverse"?-1:1),ce(r)},je=()=>{const o=W.current[ie];let r=0;const d=Array.from(V.current.children);for(let c=0;c<d.length;c+=1){const S=d[c];if(r+S[ie]>o){c===0&&(r=o);break}r+=S[ie]}return r},et=()=>{Ee(-1*je())},tt=()=>{Ee(je())},ot=u.useCallback(o=>{Ze({overflow:null,scrollbarWidth:o})},[]),lt=()=>{const o={};o.scrollbarSizeListener=j?n.jsx(Dt,{onChange:ot,className:H($.scrollableX,$.hideScrollbar)}):null;const d=j&&(M==="auto"&&(Ce||Be)||M===!0);return o.scrollButtonStart=d?n.jsx(L,v({slots:{StartScrollButtonIcon:F.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Ye},orientation:g,direction:i?"right":"left",onClick:et,disabled:!Ce},P,{className:H($.scrollButtons,P.className)})):null,o.scrollButtonEnd=d?n.jsx(L,v({slots:{EndScrollButtonIcon:F.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Ke},orientation:g,direction:i?"left":"right",onClick:tt,disabled:!Be},P,{className:H($.scrollButtons,P.className)})):null,o},Re=be(o=>{const{tabsMeta:r,tabMeta:d}=Me();if(!(!d||!r)){if(d[te]<r[te]){const c=r[Q]+(d[te]-r[te]);ce(c,{animation:o})}else if(d[oe]>r[oe]){const c=r[Q]+(d[oe]-r[oe]);ce(c,{animation:o})}}}),le=be(()=>{j&&M!==!1&&Je(!we)});u.useEffect(()=>{const o=Xe(()=>{W.current&&Z()});let r;const d=B=>{B.forEach(R=>{R.removedNodes.forEach(ee=>{var A;(A=r)==null||A.unobserve(ee)}),R.addedNodes.forEach(ee=>{var A;(A=r)==null||A.observe(ee)})}),o(),le()},c=De(W.current);c.addEventListener("resize",o);let S;return typeof ResizeObserver<"u"&&(r=new ResizeObserver(o),Array.from(V.current.children).forEach(B=>{r.observe(B)})),typeof MutationObserver<"u"&&(S=new MutationObserver(d),S.observe(V.current,{childList:!0})),()=>{var B,R;o.clear(),c.removeEventListener("resize",o),(B=S)==null||B.disconnect(),(R=r)==null||R.disconnect()}},[Z,le]),u.useEffect(()=>{const o=Array.from(V.current.children),r=o.length;if(typeof IntersectionObserver<"u"&&r>0&&j&&M!==!1){const d=o[0],c=o[r-1],S={root:W.current,threshold:.99},B=ue=>{qe(!ue[0].isIntersecting)},R=new IntersectionObserver(B,S);R.observe(d);const ee=ue=>{Qe(!ue[0].isIntersecting)},A=new IntersectionObserver(ee,S);return A.observe(c),()=>{R.disconnect(),A.disconnect()}}},[j,M,we,w==null?void 0:w.length]),u.useEffect(()=>{Ge(!0)},[]),u.useEffect(()=>{Z()}),u.useEffect(()=>{Re(Ne!==_)},[Re,_]),u.useImperativeHandle(p,()=>({updateIndicator:Z,updateScrollButtons:le}),[Z,le]);const Pe=n.jsx(Ht,v({},k,{className:H($.indicator,k.className),ownerState:U,style:v({},_,k.style)}));let re=0;const rt=u.Children.map(w,o=>{if(!u.isValidElement(o))return null;const r=o.props.value===void 0?re:o.props.value;Te.set(r,re);const d=r===N;return re+=1,u.cloneElement(o,v({fullWidth:h==="fullWidth",indicator:d&&!ge&&Pe,selected:d,selectionFollowsFocus:q,onChange:C,textColor:K,value:r},re===1&&N===!1&&!o.props.tabIndex?{tabIndex:0}:{}))}),nt=o=>{const r=V.current,d=it(r).activeElement;if(d.getAttribute("role")!=="tab")return;let S=g==="horizontal"?"ArrowLeft":"ArrowUp",B=g==="horizontal"?"ArrowRight":"ArrowDown";switch(g==="horizontal"&&i&&(S="ArrowRight",B="ArrowLeft"),o.key){case S:o.preventDefault(),ne(r,d,ke);break;case B:o.preventDefault(),ne(r,d,Fe);break;case"Home":o.preventDefault(),ne(r,null,Fe);break;case"End":o.preventDefault(),ne(r,null,ke);break}},de=lt();return n.jsxs($t,v({className:H($.root,y),ownerState:U,ref:l,as:b},Ve,{children:[de.scrollButtonStart,de.scrollbarSizeListener,n.jsxs(At,{className:$.scroller,ownerState:U,style:{overflow:Ie.overflow,[E?`margin${i?"Left":"Right"}`:"marginBottom"]:X?void 0:-Ie.scrollbarWidth},ref:W,children:[n.jsx(Ot,{"aria-label":m,"aria-labelledby":f,"aria-orientation":g==="vertical"?"vertical":null,className:$.flexContainer,ownerState:U,onKeyDown:nt,ref:V,role:"tablist",children:rt}),ge&&Pe]}),de.scrollButtonEnd]}))}),Ut=ct(n.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");function $e(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function Ae(e){const{children:t,value:l,index:s,...a}=e;return n.jsx("div",{role:"tabpanel",hidden:l!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...a,children:l===s&&n.jsx(he,{sx:{p:3},children:n.jsx(ft,{children:t})})})}function Kt({accept:e,...t}){const[l,s]=z.useState(1),[a,i]=z.useState(1),[m,f]=z.useState([]),[p,x]=z.useState(),[w,y]=z.useState(),[b,I]=z.useState(),[T,C]=z.useState({page:a,limit:30,root:!0,accept:e?Object.keys(e||{}).join(",").toString():void 0}),{data:g,refetch:L,isLoading:M,isFetching:q}=dt(T),F=M||q||!p||!m,D=(h,X)=>{s(X)},k=()=>{s(1)};z.useEffect(()=>{g&&(f(m.concat(g.data)),x(g.meta))},[g]),z.useEffect(()=>{if(!b)return;let h=b[b.length-1];i(1),C(h?{...T,parent_id:h.id,root:!1,page:1}:{...T,parent_id:null,root:!0,page:1})},[b]);const P=h=>{i(h),C({...T,page:h})},K=h=>{x&&x(void 0),f&&f([]),y&&y(h),I([...b||[],h])},N=()=>{x(void 0),f([]);let h=(b||[]).slice(0,(b||[]).length-1);I(h)};return n.jsxs(n.Fragment,{children:[n.jsx(he,{sx:{borderBottom:1,borderColor:"divider"},children:n.jsxs(Xt,{value:l,onChange:D,"aria-label":"Media tabs",children:[n.jsx(Le,{label:fe("Upload"),...$e(0)}),n.jsx(Le,{label:fe("Select"),...$e(1)})]})}),n.jsx(Ae,{value:l,index:0,children:n.jsx(pt,{refetchMedia:L,onUploadSuccess:k,accept:e,folder:(w==null?void 0:w.id)||null,setData:f,setMeta:x})}),n.jsx(Ae,{value:l,index:1,children:F?n.jsx(he,{sx:{display:"flex",justifyContent:"center"},children:n.jsx(We,{})}):n.jsxs(ut,{children:[b&&b.length>0&&n.jsx(bt,{onClick:()=>N(),startIcon:n.jsx(Ut,{}),sx:{marginBottom:"20px"},variant:"outlined",children:fe("Back")}),n.jsx(ht,{pageStart:1,loadMore:P,hasMore:p.last_page>a,useWindow:!1,loader:n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"100px"},children:n.jsx(We,{})}),children:n.jsx(ze,{container:!0,spacing:1,children:m.map((h,X)=>n.jsx(ze,{item:!0,xs:6,sm:2,md:2,children:n.jsx(vt,{item:h,mediaQuery:T,setMediaQuery:C,showAction:t.showAction||!1,setData:f,setMeta:x,setFolder:y,onGoToFolder:K,...t})},X))})})]})})]})}export{Kt as F};
