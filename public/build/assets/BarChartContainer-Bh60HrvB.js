import{J as et,M as at,X as j,b9 as ot,p as l,j as n,Z as it,K as nt,r as z,ak as yt,G as Q,T as bt,a1 as Ct,C as At}from"./index-C7XDJ_kP.js";import{f as q,g as Pt,j as kt,h as Z,z as tt,A as $t,D as rt,B as lt,E as jt,m as It,F as Bt,R as wt,C as Lt,v as vt,w as Mt,x as St,y as _t}from"./ChartsOverlay-CDQBLoa8.js";import{a as ct,u as Rt,C as Et,b as Tt,c as Dt}from"./ChartsOnAxisClickHandler-O3Rui8tf.js";import{a as dt}from"./LoadingButton-C5RViJFF.js";import"./InputLabel-R-0Q6san.js";import"./OutlinedInput-Dl_FMo8h.js";import"./Alert-swsxPqK4.js";const Ht=["id","dataIndex","classes","color","slots","slotProps","style","onClick"];function Ft(t){return nt("MuiBarElement",t)}et("MuiBarElement",["root"]);const Ot=t=>{const{classes:s,id:a}=t,e={root:["root",`series-${a}`]};return it(e,Ft,s)},Gt=at(q.rect,{name:"MuiBarElement",slot:"Root",overridesResolver:(t,s)=>s.root})(({ownerState:t})=>({stroke:"none",fill:t.isHighlighted?Pt(t.color).brighter(.5).formatHex():t.color,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",opacity:t.isFaded&&.3||1}));function Ut(t){const{id:s,dataIndex:a,classes:e,color:i,slots:o,slotProps:r,style:x,onClick:h}=t,y=j(t,Ht),p=kt(),{isFaded:d,isHighlighted:u}=ct({seriesId:s,dataIndex:a}),f={id:s,dataIndex:a,classes:e,color:i,isFaded:d,isHighlighted:u},m=Ot(f),c=(o==null?void 0:o.bar)??Gt,A=ot({elementType:c,externalSlotProps:r==null?void 0:r.bar,externalForwardedProps:y,additionalProps:l({},p({type:"bar",seriesId:s,dataIndex:a}),{style:x,onClick:h,cursor:h?"pointer":"unset"}),className:m.root,ownerState:f});return n.jsx(c,l({},A))}const O=(t,{hasNegative:s,hasPositive:a,borderRadius:e,layout:i})=>{if(!e)return 0;const o=i==="vertical";return t==="top-left"&&(o&&a||!o&&s)||t==="top-right"&&(o&&a||!o&&a)||t==="bottom-right"&&(o&&s||!o&&a)||t==="bottom-left"&&(o&&s||!o&&s)?e:0},zt=["style","maskId"],Xt=t=>`inset(0px round ${t.topLeft}px ${t.topRight}px ${t.bottomRight}px ${t.bottomLeft}px)`;function Kt(t){var a,e;const s=t.ownerState;return n.jsx(q.rect,{style:l({},t.style,{clipPath:(t.ownerState.layout==="vertical"?(a=t.style)==null?void 0:a.height:(e=t.style)==null?void 0:e.width).to(i=>Xt({topLeft:Math.min(i,O("top-left",s)),topRight:Math.min(i,O("top-right",s)),bottomRight:Math.min(i,O("bottom-right",s)),bottomLeft:Math.min(i,O("bottom-left",s))}))})})}function Wt(t){const{style:s,maskId:a}=t,e=j(t,zt);return!t.borderRadius||t.borderRadius<=0?null:n.jsx("clipPath",{id:a,children:n.jsx(Kt,{ownerState:e,style:s})})}function Nt(t){return nt("MuiBarLabel",t)}const V=et("MuiBarLabel",["root","highlighted","faded"]),Yt=t=>{const{classes:s,seriesId:a,isFaded:e,isHighlighted:i}=t,o={root:["root",`series-${a}`,i&&"highlighted",e&&"faded"]};return it(o,Nt,s)},Vt=t=>{const{barLabel:s,value:a,dataIndex:e,seriesId:i,height:o,width:r}=t;return s==="value"?a?a==null?void 0:a.toString():null:s({seriesId:i,dataIndex:e,value:a},{bar:{height:o,width:r}})},Jt=["seriesId","dataIndex","color","isFaded","isHighlighted","classes"],Zt=at(q.text,{name:"MuiBarLabel",slot:"Root",overridesResolver:(t,s)=>[{[`&.${V.faded}`]:s.faded},{[`&.${V.highlighted}`]:s.highlighted},s.root]})(({theme:t})=>{var s,a,e,i;return l({},(s=t==null?void 0:t.typography)==null?void 0:s.body2,{stroke:"none",fill:(i=(e=(a=t.vars||t)==null?void 0:a.palette)==null?void 0:e.text)==null?void 0:i.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${V.faded}`]:{opacity:.3}})});function qt(t){const s=dt({props:t,name:"MuiBarLabel"}),a=j(s,Jt);return n.jsx(Zt,l({},a))}const Qt=["seriesId","classes","color","style","dataIndex","barLabel","slots","slotProps","height","width","value"],ts=["ownerState"];function ss(t){const{seriesId:s,classes:a,color:e,style:i,dataIndex:o,barLabel:r,slots:x,slotProps:h,height:y,width:p,value:d}=t,u=j(t,Qt),{isFaded:f,isHighlighted:m}=ct({seriesId:s,dataIndex:o}),c={seriesId:s,classes:a,color:e,isFaded:f,isHighlighted:m,dataIndex:o},A=Yt(c),P=(x==null?void 0:x.barLabel)??qt,I=ot({elementType:P,externalSlotProps:h==null?void 0:h.barLabel,additionalProps:l({},u,{style:i,className:A.root}),ownerState:c}),{ownerState:L}=I,C=j(I,ts);if(!r)return null;const k=Vt({barLabel:r,value:d,dataIndex:o,seriesId:s,height:y,width:p});return k?n.jsx(P,l({},C,L,{children:k})):null}const es=["bars","skipAnimation"],as=({layout:t,yOrigin:s,x:a,width:e,y:i,xOrigin:o,height:r})=>l({},t==="vertical"?{y:s,x:a+e/2,height:0,width:e}:{y:i+r/2,x:o,height:r,width:0}),st=({x:t,width:s,y:a,height:e})=>({x:t+s/2,y:a+e/2,height:e,width:s});function os(t){const{bars:s,skipAnimation:a}=t,e=j(t,es),i=Z(s,{keys:o=>`${o.seriesId}-${o.dataIndex}`,from:as,leave:null,enter:st,update:st,immediate:a});return n.jsx(z.Fragment,{children:i((o,{seriesId:r,dataIndex:x,color:h,value:y,width:p,height:d})=>n.jsx(ss,l({seriesId:r,dataIndex:x,value:y,color:h,width:p,height:d},e,{style:o})))})}const J=(t,s)=>{const a=`${t}-axis`,e=`${t}Axis`;return s===(t==="x"?rt:lt)?`The first \`${e}\``:`The ${a} with id "${s}"`};function is(t,s,a,e,i,o){const r=e[a],x=o[i],h=t?r:x,y=t?x:r,p=t?a:i,d=t?i:a,u=t?"x":"y",f=t?"y":"x";if(!tt(h))throw new Error(`MUI X: ${J(u,p)} should be of type "band" to display the bar series of id "${s}".`);if(h.data===void 0)throw new Error(`MUI X: ${J(u,p)} should have data property.`);if(tt(y)||$t(y))throw new Error(`MUI X: ${J(f,d)} should be a continuous type to display the bar series of id "${s}".`)}const ns=["skipAnimation","onItemClick","borderRadius","barLabel"];function rs({bandWidth:t,numberOfGroups:s,gapRatio:a}){if(a===0)return{barWidth:t/s,offset:0};const e=t/(s+(s-1)*a),i=a*e;return{barWidth:e,offset:i}}const ls=()=>{const t=jt()??{series:{},stackingGroups:[],seriesOrder:[]},s=It(),a=Rt(),{series:e,stackingGroups:i}=t,{xAxis:o,yAxis:r,xAxisIds:x,yAxisIds:h}=s,y=x[0],p=h[0],d={};return{completedData:i.flatMap(({ids:f},m)=>f.flatMap(c=>{const A=e[c].xAxisId??e[c].xAxisKey??y,P=e[c].yAxisId??e[c].yAxisKey??p,I=o[A],L=r[P],C=e[c].layout==="vertical";is(C,c,A,o,P,r);const k=C?I:L,v=I.scale,M=L.scale,R=Bt(e[c],o[A],r[P]),X=k.scale.bandwidth(),{barWidth:_,offset:K}=rs({bandWidth:X,numberOfGroups:i.length,gapRatio:k.barGapRatio}),E=m*(_+K),{stackedData:W}=e[c];return W.map((N,$)=>{var D,H;const Y=N.map(F=>C?M(F):v(F)),B=Math.round(Math.min(...Y)),w=Math.round(Math.max(...Y)),T=e[c].stack,g={seriesId:c,dataIndex:$,layout:e[c].layout,x:C?v((D=o[A].data)==null?void 0:D[$])+E:B,y:C?B:M((H=r[P].data)==null?void 0:H[$])+E,xOrigin:v(0),yOrigin:M(0),height:C?w-B:_,width:C?_:w-B,color:R($),value:e[c].data[$],maskId:`${a}_${T||c}_${m}_${$}`};d[g.maskId]||(d[g.maskId]={id:g.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:g.layout,xOrigin:v(0),yOrigin:M(0),x:0,y:0});const b=d[g.maskId];return b.width=g.layout==="vertical"?g.width:b.width+g.width,b.height=g.layout==="vertical"?b.height+g.height:g.height,b.x=Math.min(b.x===0?1/0:b.x,g.x),b.y=Math.min(b.y===0?1/0:b.y,g.y),b.hasNegative=b.hasNegative||(g.value??0)<0,b.hasPositive=b.hasPositive||(g.value??0)>0,g})})),masksData:Object.values(d)}},G=({layout:t,yOrigin:s,x:a,width:e,y:i,xOrigin:o,height:r})=>l({},t==="vertical"?{y:s,x:a,height:0,width:e}:{y:i,x:o,height:r,width:0}),U=({x:t,width:s,y:a,height:e})=>({y:a,x:t,height:e,width:s});function cs(t){const{completedData:s,masksData:a}=ls(),{skipAnimation:e,onItemClick:i,borderRadius:o,barLabel:r}=t,x=j(t,ns),h=!o||o<=0,y=Z(s,{keys:d=>`${d.seriesId}-${d.dataIndex}`,from:G,leave:G,enter:U,update:U,immediate:e}),p=Z(h?[]:a,{keys:d=>d.id,from:G,leave:G,enter:U,update:U,immediate:e});return n.jsxs(z.Fragment,{children:[!h&&p((d,{id:u,hasPositive:f,hasNegative:m,layout:c})=>n.jsx(Wt,{maskId:u,borderRadius:o,hasNegative:m,hasPositive:f,layout:c,style:d})),y((d,{seriesId:u,dataIndex:f,color:m,maskId:c})=>{const A=n.jsx(Ut,l({id:u,dataIndex:f,color:m},x,{onClick:i&&(P=>{i(P,{type:"bar",seriesId:u,dataIndex:f})}),style:d}));return h?A:n.jsx("g",{clipPath:`url(#${c})`,children:A})}),r&&n.jsx(os,l({bars:s,skipAnimation:e,barLabel:r},x))]})}const ds=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","tooltip","onAxisClick","axisHighlight","legend","grid","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className"],hs=t=>{const{xAxis:s,yAxis:a,series:e,width:i,height:o,margin:r,colors:x,dataset:h,sx:y,tooltip:p,onAxisClick:d,axisHighlight:u,legend:f,grid:m,topAxis:c,leftAxis:A,rightAxis:P,bottomAxis:I,children:L,slots:C,slotProps:k,skipAnimation:v,loading:M,layout:R,onItemClick:X,highlightedItem:_,onHighlightChange:K,borderRadius:E,barLabel:W,className:N}=t,$=j(t,ds),B=`${yt()}-clip-path`,w=R==="horizontal"||R===void 0&&e.some(S=>S.layout==="horizontal"),T={scaleType:"band",data:Array.from({length:Math.max(...e.map(S=>(S.data??h??[]).length))},(S,ft)=>ft)},g=l({},$,{series:e.map(S=>l({type:"bar"},S,{layout:w?"horizontal":"vertical"})),width:i,height:o,margin:r,colors:x,dataset:h,xAxis:s??(w?void 0:[l({id:rt},T)]),yAxis:a??(w?[l({id:lt},T)]:void 0),sx:y,highlightedItem:_,onHighlightChange:K,disableAxisListener:(p==null?void 0:p.trigger)!=="axis"&&(u==null?void 0:u.x)==="none"&&(u==null?void 0:u.y)==="none"&&!d,className:N}),b={onItemClick:X,slots:C,slotProps:k,skipAnimation:v,borderRadius:E,barLabel:W},D={onAxisClick:d},H={vertical:m==null?void 0:m.vertical,horizontal:m==null?void 0:m.horizontal},F={clipPath:`url(#${B})`},ht={id:B},ut={slots:C,slotProps:k,loading:M},xt={topAxis:c,leftAxis:A,rightAxis:P,bottomAxis:I,slots:C,slotProps:k},pt=l({},w?{y:"band"}:{x:"band"},u),mt=l({},f,{slots:C,slotProps:k}),gt=l({},p,{slots:C,slotProps:k});return{chartContainerProps:g,barPlotProps:b,axisClickHandlerProps:D,gridProps:H,clipPathProps:ht,clipPathGroupProps:F,overlayProps:ut,chartsAxisProps:xt,axisHighlightProps:pt,legendProps:mt,tooltipProps:gt,children:L}},us=z.forwardRef(function(s,a){const e=dt({props:s,name:"MuiBarChart"}),{chartContainerProps:i,barPlotProps:o,axisClickHandlerProps:r,gridProps:x,clipPathProps:h,clipPathGroupProps:y,overlayProps:p,chartsAxisProps:d,axisHighlightProps:u,legendProps:f,tooltipProps:m,children:c}=hs(e);return n.jsxs(wt,l({ref:a},i,{children:[e.onAxisClick&&n.jsx(Et,l({},r)),n.jsx(Tt,l({},x)),n.jsxs("g",l({},y,{children:[n.jsx(cs,l({},o)),n.jsx(Lt,l({},p)),n.jsx(vt,l({},u))]})),n.jsx(Mt,l({},d)),n.jsx(St,l({},f)),!e.loading&&n.jsx(_t,l({},m)),n.jsx(Dt,l({},h)),c]}))});function xs({config:t}){return n.jsx(us,{xAxis:t.xAxis,yAxis:t.yAxis,series:t.series,height:300,...t==null?void 0:t.attributes})}function As({config:t}){const{title:s}=t,[a,e]=z.useState("week");return n.jsxs(n.Fragment,{children:[n.jsx(Q,{container:!0,alignItems:"center",justifyContent:"space-between",children:n.jsx(Q,{item:!0,children:n.jsx(bt,{variant:"h5",children:s})})}),n.jsx(Ct,{content:!1,sx:{mt:1.5},children:n.jsx(At,{sx:{pt:1,pr:2},children:n.jsx(xs,{slot:a,config:t})})})]})}export{As as default};
