import{R as i,F as U,j as e,b3 as p,bc as k,bd as g,U as $,be as G,J as L,G as f,K as Q,A as R,B as y,g as W}from"./index-C-recmsz.js";import{m as E}from"./makeStyles-Bafc_MSd.js";import{D as I,a as w,b as J,c as K}from"./DialogTitle-CZNhHO00.js";const O=E({topScrollPaper:{alignItems:"flex-start"},topPaperScrollBody:{verticalAlign:"top"}});function S(a){const{children:o,value:t,index:s,...r}=a;return e.jsx("div",{role:"tabpanel",hidden:t!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...r,children:t===s&&e.jsx(p,{sx:{p:3},children:e.jsx(W,{children:o})})})}function C(a){return{id:`simple-tab-${a}`,"aria-controls":`simple-tabpanel-${a}`}}const H=({open:a,setOpen:o,accept:t,onChoose:s,multipleSelect:r=!1})=>{const x=O(),[h,V]=i.useState(""),[n,u]=i.useState(1),[d,B]=i.useState({page:1,limit:30,parent_id:h,accept:t?Object.keys(t||{}).join(",").toString():void 0}),[l,M]=i.useState(),P=(j,c)=>{u(c)},{data:v,refetch:m,isLoading:D,isFetching:T}=U(d),A=D||T;i.useEffect(()=>{m()},[h,d]);const b=()=>{o(!1)},F=()=>{u(1)};return e.jsxs(I,{open:a,onClose:()=>b(),fullWidth:!0,maxWidth:"lg",scroll:"paper","aria-labelledby":"simple-dialog-title",classes:{scrollPaper:x.topScrollPaper,paperScrollBody:x.topPaperScrollBody},children:[e.jsx(w,{sx:{fontWeight:"bold"},children:e.jsx(p,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(k,{value:n,onChange:P,"aria-label":"Media tabs",children:[e.jsx(g,{label:"Upload",...C(0)}),e.jsx(g,{label:"Select",...C(1)})]})})}),e.jsxs(J,{children:[e.jsx(S,{value:n,index:0,children:e.jsx($,{refetchMedia:m,onUploadSuccess:F,accept:t})}),e.jsx(S,{value:n,index:1,children:A?e.jsx(p,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(G,{})}):e.jsx(L,{children:e.jsx(f,{container:!0,spacing:1,children:v.data.map((j,c)=>e.jsx(f,{item:!0,xs:6,sm:2,md:2,children:e.jsx(Q,{item:j,showAction:!1,mediaQuery:d,setMediaQuery:B,selectedItems:l,setSelectedItems:M,multipleSelect:r,onChoose:s})},c))})})})]}),e.jsxs(K,{children:[s&&r&&e.jsx(R,{children:e.jsx(y,{onClick:()=>s(l),type:"submit",variant:"contained",color:"primary",disabled:!l||(l==null?void 0:l.length)===0,children:"Choose"})}),e.jsx(y,{onClick:b,color:"primary",children:"Close"})]})]})};export{H as default};
