import{u as m,r as u,a as I,R as V,j as e,G as t,I as B,L as K,b as E,S as M,D as W,T as h,c as q,s as z,l as w,m as y,d as G,A as N,e as O}from"./index-C7XDJ_kP.js";import{u as _,T as b,E as U,A as $,L as H}from"./LoadingButton-C5RViJFF.js";import{E as J,a as Q,F as X}from"./SocialLogin-BHhPx49f.js";import{C as Y}from"./Checkbox-Wx-LT1lb.js";import{u as S}from"./useTranslation-FWVaBoU2.js";import{I as Z}from"./InputAdornment-Y9IKr8lC.js";import"./InputLabel-R-0Q6san.js";import"./OutlinedInput-Dl_FMo8h.js";import"./Alert-swsxPqK4.js";import"./FormControlLabel-CtregJwz.js";function v(){const{loading:c}=m(s=>s.auth),{general:a}=m(s=>s.setting),[n,l]=u.useState(),[o,k]=u.useState(!1),L=u.useCallback(s=>{l(s)},[l]),{t:r}=S(),d=_(),{setError:x,setValue:g,formState:{errors:C},handleSubmit:T}=d,f=I(),j=q.recaptchaSiteKey,[p,A]=V.useState(!1),D=()=>{A(!p)},F=s=>{s.preventDefault()},P=s=>{if(j){if(!n){z(r("Recaptcha not ready. Please wait..."),"warning");return}return s["g-recaptcha-token"]=n,f(w(s)).then(i=>{i.payload.success||(y(i,x),g("password",""),k(R=>!R))})}else return f(w(s)).then(i=>{i.payload.success||(y(i,x),g("password",""))})};return e.jsx(e.Fragment,{children:e.jsx("form",{noValidate:!0,onSubmit:T(P),children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(b,{label:r("Email"),name:"email",type:"email",form:d,config:{rules:["required","email"]},placeholder:r("Enter email address")}),e.jsx(b,{fullWidth:!0,label:r("Password"),type:p?"text":"password",form:d,name:"password",endAdornment:e.jsx(Z,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:D,onMouseDown:F,edge:"end",color:"secondary",children:p?e.jsx(J,{}):e.jsx(Q,{})})}),placeholder:r("Enter password"),config:{rules:["required"]}}),e.jsx(Y,{form:d,name:"remember",label:"Keep me sign in",color:"primary",size:"small",defaultChecked:!0,defaultValue:1,after:e.jsx(K,{variant:"h6",component:E,color:"text.primary",to:"/user/forgot-password",children:r("Forgot Password?")})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(U,{errors:C})}),e.jsx(t,{item:!0,xs:12,children:e.jsx($,{children:e.jsx(H,{disableElevation:!0,loading:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})}),j&&e.jsx(M,{onVerify:L,refreshReCaptcha:o}),a&&a.login_socials.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(W,{children:e.jsxs(h,{variant:"caption",children:[" ",r("Login with")]})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(X,{})})]})]})})})}v.propTypes={};function de(){const{userToken:c}=m(o=>o.auth),{settings:a}=m(o=>o.setting),{t:n}=S(),l=G();return u.useEffect(()=>{c&&l("/admin-cp/dashboard",{replace:!0})},[c]),e.jsx(N,{title:"Login",children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsxs(O,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(h,{variant:"h3",children:n("Login")}),a&&a.user_registration&&e.jsx(h,{component:E,to:"/user/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:n("Don't have an account?")})]})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(v,{})})]})})}export{de as default};
